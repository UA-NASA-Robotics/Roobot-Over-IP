<mxfile host="app.diagrams.net" modified="2025-08-26T00:00:00.000Z" agent="github-copilot" version="22.0.3" type="device">
  <diagram id="data-flow" name="Data Flow">
    <mxGraphModel dx="1220" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Operator inputs / Teleop -->
        <mxCell id="teleop" value="Teleop / Mission Node(s)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="60" y="80" width="220" height="70" as="geometry"/>
        </mxCell>

        <!-- ODrive ROS Node group -->
        <mxCell id="odrive_group" value="ODrive Nodes (x4)" style="swimlane;rounded=1;childLayout=stackLayout;horizontal=1;resizable=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="360" y="60" width="420" height="180" as="geometry"/>
        </mxCell>
  <mxCell id="odrv_rr" value="ODrive Node (axis0)\nTopics: roi_ros/odrv/axis0/state, power, motor_temperature, fet_temperature\nSrv: roi_ros/odrv/axis0/{set_velocity,set_torque,goto_position,goto_relative_position}\nAct: roi_ros/odrv/axis0/{goto_position,goto_relative_position}" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="odrive_group">
          <mxGeometry x="10" y="10" width="390" height="70" as="geometry"/>
        </mxCell>
  <mxCell id="odrv_fl" value="ODrive Nodes (axis1/2/3 similar names)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="odrive_group">
          <mxGeometry x="10" y="90" width="390" height="70" as="geometry"/>
        </mxCell>

        <!-- Actuator ROS Node -->
  <mxCell id="act_node" value="Actuator Node (Pitch ID 0, Tilt ID 1)\nTopics: roi_ros/act/state, roi_ros/act/home_elapsed_time\nSrv: roi_ros/act/{goto_position,goto_relative_position,set_velocity}\nAct: roi_ros/act/{goto_position_action,goto_relative_position_action}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="360" y="270" width="420" height="120" as="geometry"/>
        </mxCell>

        <!-- Transport Agent -->
        <mxCell id="ta" value="Transport Agent\nService: queue SerializedPacket\nPublishes: Health" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="860" y="180" width="260" height="90" as="geometry"/>
        </mxCell>

        <!-- UDP Network Cloud -->
        <mxCell id="net" value="Ethernet / UDP (ROI)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1180" y="170" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- Physical Modules -->
        <mxCell id="odrv_mods" value="Physical ROI Modules" style="swimlane;rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1420" y="40" width="380" height="270" as="geometry"/>
        </mxCell>
        <mxCell id="m_rr" value="ODrive Module RR" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="odrv_mods">
          <mxGeometry x="10" y="30" width="340" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="m_fl" value="ODrive Module FL" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="odrv_mods">
          <mxGeometry x="10" y="100" width="340" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="m_act" value="Actuator Module (2 axes)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="odrv_mods">
          <mxGeometry x="10" y="170" width="340" height="60" as="geometry"/>
        </mxCell>

        <!-- Edges: teleop to nodes (topics/actions) -->
  <mxCell id="e_t_odrv" value="Calls: roi_ros/odrv/axis#/set_velocity, goto_position, ..." style="endArrow=block;endFill=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="teleop" target="odrive_group">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
  <mxCell id="e_t_act" value="Calls: roi_ros/act/* services and *_action" style="endArrow=block;endFill=1;strokeColor=#9673a6;" edge="1" parent="1" source="teleop" target="act_node">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: nodes to Transport Agent -->
        <mxCell id="e_odrv_ta" value="Queue SerializedPacket (UDP General)" style="endArrow=block;endFill=1;strokeColor=#82b366;" edge="1" parent="1" source="odrive_group" target="ta">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_act_ta" value="Queue SerializedPacket (UDP General/SysAdmin)" style="endArrow=block;endFill=1;strokeColor=#82b366;" edge="1" parent="1" source="act_node" target="ta">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: TA to Network to Modules -->
        <mxCell id="e_ta_net" value="UDP packets" style="endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="ta" target="net">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_net_mods1" value="General Packets" style="endArrow=block;endFill=1;" edge="1" parent="1" source="net" target="m_rr">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_net_mods2" value="General Packets" style="endArrow=block;endFill=1;" edge="1" parent="1" source="net" target="m_fl">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_net_mods3" value="General/SysAdmin" style="endArrow=block;endFill=1;" edge="1" parent="1" source="net" target="m_act">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Edges: Module responses back to TA and Nodes -->
        <mxCell id="e_mods_net" value="Responses (state, power, temp)" style="endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="m_rr" target="net">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_net_ta" value="SerializedPacket responses" style="endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="net" target="ta">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ta_nodes" value="responseCallback(SerializedPacket)" style="endArrow=block;endFill=1;" edge="1" parent="1" source="ta" target="odrive_group">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Health message -->
        <mxCell id="e_health" value="/health" style="endArrow=block;endFill=1;strokeColor=#ff9933;dashed=1;" edge="1" parent="1" source="ta" target="teleop">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Notes -->
  <mxCell id="notes" value="Units: ODrive uses rad, rad/s, Nm; Actuators use m &amp; mm/s.\nActuator IDs: Pitch=0, Tilt=1. Ethernet is home-run to switch.\nTransport Agent: queue SerializedPacket; handles retry/timeouts and octet routing." style="text;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="60" y="420" width="1060" height="80" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
